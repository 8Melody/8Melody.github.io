I"Ü<blockquote>
  <p>è®°å½•ä½¿ç”¨Nginxåå‘ä»£ç†è§£å†³å‰ç«¯è·¨åŸŸé—®é¢˜ã€‚</p>
</blockquote>

<h1 id="nginxåå‘ä»£ç†è§£å†³å‰ç«¯è·¨åŸŸé—®é¢˜">Nginxåå‘ä»£ç†è§£å†³å‰ç«¯è·¨åŸŸé—®é¢˜</h1>

<blockquote>
  <p>No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource.</p>
</blockquote>

<p>å‰è¨€ï¼šæœ€è¿‘åœ¨æŠ“åŒ…å¿«æ‰‹ç”¨æˆ·ç»“æ„åŠè§†é¢‘çš„æ—¶å€™ï¼Œä½¿ç”¨<code class="highlighter-rouge">Fiddler</code>æŠ“å®ŒåŒ…ï¼Œåç¼–è¯‘ç ´è§£<code class="highlighter-rouge">sig</code>ç®—æ³•ä¹‹åï¼Œä½¿ç”¨H5åšäº†ä¸€ä¸ªåˆ†æå·¥å…·ï¼Œåœ¨è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¦‚ä¸Šé”™è¯¯ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­çš„äº‹æƒ…ã€‚</p>

<p>è¿™é‡Œä½¿ç”¨äº†æŸå°æœåŠ¡å™¨çš„<code class="highlighter-rouge">Nginx</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ©ç”¨<code class="highlighter-rouge">Nginx</code>çš„åå‘ä»£ç†è®¾ç½®å“åº”å¤´ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nx">location</span> <span class="o">^~</span> <span class="sr">/rest/</span> <span class="p">{</span>
       <span class="nx">add_header</span> <span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Allow</span><span class="o">-</span><span class="nx">Origin</span> <span class="o">*</span><span class="p">;</span>
       <span class="nx">add_header</span> <span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Allow</span><span class="o">-</span><span class="nx">Methods</span> <span class="dl">'</span><span class="s1">GET, POST, OPTIONS</span><span class="dl">'</span><span class="p">;</span>
       <span class="nx">add_header</span> <span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Allow</span><span class="o">-</span><span class="nx">Headers</span> <span class="dl">'</span><span class="s1">DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization</span><span class="dl">'</span><span class="p">;</span>

       <span class="k">if</span> <span class="p">(</span><span class="nx">$request_method</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">OPTIONS</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="mi">204</span><span class="p">;</span>
        <span class="p">}</span>
        
       <span class="nx">proxy_pass</span> <span class="nx">http</span><span class="p">:</span><span class="c1">//api.gifshow.com/rest/;</span>
    <span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>å…·ä½“å‚è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">HTTPè®¿é—®æ§åˆ¶ã€‚</a></p>

:ET