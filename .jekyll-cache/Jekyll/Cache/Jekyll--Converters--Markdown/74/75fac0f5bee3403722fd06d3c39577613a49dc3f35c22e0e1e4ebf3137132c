I"MÄ<p>Dartç¬¬äº”ç« -Classã€‚</p>

<h1 id="class">Class</h1>

<p>Dartæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡è¯­è¨€ï¼ŒåŒæ—¶æ”¯æŒåŸºäº mixin çš„ç»§æ‰¿æœºåˆ¶ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿è‡ª <a href="https://api.dartlang.org/stable/dart-core/Object-class.html">Object</a>ã€‚
åŸºäº Mixin çš„ç»§æ‰¿æ„å‘³ç€æ¯ä¸ªç±»ï¼ˆObject é™¤å¤–ï¼‰ éƒ½<strong>åªæœ‰ä¸€ä¸ªçˆ¶ç±»</strong>ï¼Œä¸€ä¸ªç±»çš„ä»£ç å¯ä»¥åœ¨å…¶ä»– å¤šä¸ªç±»ç»§æ‰¿ä¸­é‡å¤ä½¿ç”¨ã€‚</p>

<p>ä½¿ç”¨ <code class="highlighter-rouge">new</code> å…³é”®å­—å’Œæ„é€ å‡½æ•°æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">();</span>

<span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
    
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ¯ä¸ªå®ä¾‹å˜é‡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code class="highlighter-rouge">getter</code> æ–¹æ³•ï¼ˆéšå«çš„ï¼‰ã€‚ <code class="highlighter-rouge">Non-final</code> å®ä¾‹å˜é‡è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code class="highlighter-rouge">setter</code> æ–¹æ³•ã€‚</p>

<h2 id="å®šä¹‰å®ä¾‹å˜é‡">å®šä¹‰å®ä¾‹å˜é‡</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
    <span class="kt">num</span> <span class="n">a</span><span class="o">;</span><span class="c1">//null</span>
    <span class="kt">num</span> <span class="n">b</span><span class="o">;</span><span class="c1">//null</span>
    <span class="kt">num</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">();</span>
<span class="n">p</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
<span class="k">assert</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">a</span> <span class="o">==</span> <span class="mi">100</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‰€æœ‰æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡å€¼éƒ½æ˜¯ <code class="highlighter-rouge">null</code>ã€‚</p>

<p>æ¯ä¸ªå®ä¾‹å˜é‡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code class="highlighter-rouge">getter</code> æ–¹æ³•ï¼ˆéšå«çš„ï¼‰ã€‚ <code class="highlighter-rouge">Non-final</code> å®ä¾‹å˜é‡è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª setter æ–¹æ³•ï¼Œå‚è§ä¸‹æ–‡<code class="highlighter-rouge">Getter&amp;Setter</code>ã€‚</p>

<h2 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h2>

<p>å®šä¹‰ä¸€ä¸ªå’Œç±»åå­—ä¸€æ ·çš„æ–¹æ³•å°±å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•° è¿˜å¯ä»¥å¸¦æœ‰å…¶ä»–å¯é€‰çš„æ ‡è¯†ç¬¦ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="c1">//ä¸æ¨è</span>
  <span class="n">Point</span><span class="o">(</span><span class="kt">num</span> <span class="n">a</span><span class="o">,</span> <span class="kt">num</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å› ä¸ºè¿™ç§èµ‹å€¼æ“ä½œå¤ªå¸¸è§äº†ï¼Œæ‰€ä»¥Dartæä¾›äº†å¦‚ä¸‹è¯­æ³•ç³–ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

  <span class="n">Point</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>
<span class="o">}</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="default-constructorsé»˜è®¤æ„é€ å‡½æ•°">Default constructorsï¼ˆé»˜è®¤æ„é€ å‡½æ•°ï¼‰</h3>

<p>å¦‚æœä½ æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šæœ‰ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚ é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨è¶…ç±»çš„æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p>

<h3 id="constructors-arent-inheritedæ„é€ å‡½æ•°ä¸ä¼šç»§æ‰¿">Constructors arenâ€™t inheritedï¼ˆæ„é€ å‡½æ•°ä¸ä¼šç»§æ‰¿ï¼‰</h3>

<p>å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°ã€‚å­ç±»å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™åªæœ‰ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•° ï¼ˆæ²¡æœ‰åå­—æ²¡æœ‰å‚æ•°ï¼‰ã€‚</p>

<h3 id="named-constructorså‘½åæ„é€ å‡½æ•°">Named constructorsï¼ˆå‘½åæ„é€ å‡½æ•°ï¼‰</h3>

<p>ä½¿ç”¨å‘½åæ„é€ å‡½æ•°å¯ä»¥ä¸ºä¸€ä¸ªç±»å®ç°å¤šä¸ªæ„é€ å‡½æ•°ï¼Œ æˆ–è€…ä½¿ç”¨å‘½åæ„é€ å‡½æ•°æ¥æ›´æ¸…æ™°çš„è¡¨æ˜ä½ çš„æ„å›¾ï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  
  <span class="n">Point</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">Map</span> <span class="n">map</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="s">'a'</span><span class="o">];</span>
    <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="s">'b'</span><span class="o">];</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ³¨æ„ï¼šæ„é€ å‡½æ•°ä¸èƒ½ç»§æ‰¿ï¼Œæ‰€ä»¥è¶…ç±»çš„å‘½åæ„é€ å‡½æ•° ä¹Ÿä¸ä¼šè¢«ç»§æ‰¿ã€‚å¦‚æœå¸Œæœ› å­ç±»ä¹Ÿæœ‰è¶…ç±»ä¸€æ ·çš„å‘½åæ„é€ å‡½æ•°ï¼Œå¿…é¡»åœ¨å­ç±»ä¸­è‡ªå·±å®ç°è¯¥æ„é€ å‡½æ•°ã€‚</strong></p>

<h3 id="invoking-a-non-default-superclass-constructorè°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°">Invoking a non-default superclass constructorï¼ˆè°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼‰</h3>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»çš„æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨è¶…ç±»çš„ æ— åæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚</p>

<p>è¶…ç±»çš„æ„é€ å‡½æ•°åœ¨å­ç±»æ„é€ å‡½æ•°ä½“å¼€å§‹æ‰§è¡Œçš„ä½ç½®è°ƒç”¨ã€‚ å¦‚æœæä¾›äº†ä¸€ä¸ª <code class="highlighter-rouge">initializer listï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰[è§ä¸‹æ–‡]</code>ï¼Œåˆ™åˆå§‹åŒ–å‚æ•°åˆ—è¡¨åœ¨è¶…ç±»æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚ä¸‹é¢æ˜¯æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼š</p>

<ul>
  <li>1ï¼Œinitializer listï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰</li>
  <li>2ï¼Œsuperclassâ€™s no-arg constructorï¼ˆè¶…ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰</li>
  <li>3ï¼Œmain classâ€™s no-arg constructorï¼ˆä¸»ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰</li>
</ul>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">var</span> <span class="n">stu</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="na">fromJson</span><span class="o">({});</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
  <span class="kt">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="n">Person</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">Map</span> <span class="n">json</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="s">"invoke Person constructor"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Student</span> <span class="kd">extends</span> <span class="n">Person</span> <span class="o">{</span>
  <span class="n">Student</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">Map</span> <span class="n">json</span><span class="o">)</span> <span class="o">:</span> <span class="k">super</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">json</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="s">"invoke Student constructor"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‰§è¡Œé¡ºåºä¸ºï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">invoke</span> <span class="n">Person</span> <span class="n">constructor</span>
<span class="n">invoke</span> <span class="n">Student</span> <span class="n">constructor</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç”±äºè¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥ å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æˆ–è€… ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Student</span> <span class="kd">extends</span> <span class="n">Person</span> <span class="o">{</span>
  <span class="c1">// ...</span>
  <span class="n">Student</span><span class="o">()</span> <span class="o">:</span> <span class="k">super</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">findDefaultData</span><span class="o">());</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ³¨æ„ï¼š å¦‚æœåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨ super()ï¼Œéœ€è¦æŠŠå®ƒæ”¾åˆ°æœ€åã€‚</strong></p>

<h3 id="initializer-liståˆå§‹åŒ–åˆ—è¡¨">Initializer listï¼ˆåˆå§‹åŒ–åˆ—è¡¨ï¼‰</h3>

<p>åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰é™¤äº†å¯ä»¥è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åˆå§‹åŒ–å®ä¾‹å‚æ•°ã€‚ ä½¿ç”¨é€—å·åˆ†éš”åˆå§‹åŒ–è¡¨è¾¾å¼ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">square</span><span class="o">;</span>
  
  <span class="n">Point</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span>
      <span class="o">:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="o">,</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">y</span><span class="o">,</span>
        <span class="n">square</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">;</span>
<span class="o">}</span>   

<span class="kd">var</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span>
<span class="n">print</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">square</span><span class="o">);</span><span class="c1">//100</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="redirecting-constructorsé‡å®šå‘æ„é€ å‡½æ•°">Redirecting constructorsï¼ˆé‡å®šå‘æ„é€ å‡½æ•°ï¼‰</h3>

<p>æœ‰æ—¶å€™ä¸€ä¸ªæ„é€ å‡½æ•°ä¼šè°ƒåŠ¨ç±»ä¸­çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚ ä¸€ä¸ªé‡å®šå‘æ„é€ å‡½æ•°æ˜¯æ²¡æœ‰ä»£ç çš„ï¼Œåœ¨æ„é€ å‡½æ•°å£°æ˜åï¼Œä½¿ç”¨å†’å·è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">square</span><span class="o">;</span>

  <span class="n">Point</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>

  <span class="n">Point</span><span class="o">.</span><span class="na">alongX</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="k">this</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="constant-constructorså¸¸é‡æ„é€ å‡½æ•°">Constant constructorsï¼ˆå¸¸é‡æ„é€ å‡½æ•°ï¼‰</h3>

<p>å¦‚æœç±»æä¾›ä¸€ä¸ªçŠ¶æ€ä¸å˜çš„å¯¹è±¡ï¼Œå¯ä»¥æŠŠè¿™äº›å¯¹è±¡ å®šä¹‰ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª const æ„é€ å‡½æ•°ï¼Œ å¹¶ä¸”å£°æ˜æ‰€æœ‰ç±»çš„å˜é‡ä¸º finalã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">ImmutablePoint</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="kt">num</span> <span class="n">x</span><span class="o">;</span>
  <span class="kd">final</span> <span class="kt">num</span> <span class="n">y</span><span class="o">;</span>
  <span class="kd">const</span> <span class="n">ImmutablePoint</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="o">);</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">ImmutablePoint</span> <span class="n">origin</span> <span class="o">=</span>
      <span class="kd">const</span> <span class="n">ImmutablePoint</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="factory-constructorså·¥å‚æ–¹æ³•æ„é€ å‡½æ•°">Factory constructorsï¼ˆå·¥å‚æ–¹æ³•æ„é€ å‡½æ•°ï¼‰</h3>

<p>å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°å¹¶ä¸æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ factory æ¥å®šä¹‰ è¿™ä¸ªæ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•° å¯èƒ½ä»ç¼“å­˜ä¸­è·å–ä¸€ä¸ªå®ä¾‹å¹¶è¿”å›ï¼Œæˆ–è€… è¿”å›ä¸€ä¸ªå­ç±»å‹çš„å®ä¾‹ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">var</span> <span class="n">_logger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="o">(</span><span class="s">"qfxl"</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Logger</span> <span class="o">{</span>
  <span class="kt">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="n">Logger</span><span class="o">.</span><span class="na">_internal</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>

  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="n">Logger</span><span class="o">&gt;</span> <span class="n">_cache</span> <span class="o">=</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="n">Logger</span><span class="o">&gt;();</span>

  <span class="kd">factory</span> <span class="n">Logger</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">_cache</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">name</span><span class="o">))</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">_cache</span><span class="o">[</span><span class="n">name</span><span class="o">];</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="kd">var</span> <span class="n">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="o">.</span><span class="na">_internal</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
      <span class="n">_cache</span><span class="o">[</span><span class="n">name</span><span class="o">]</span> <span class="o">=</span> <span class="n">logger</span><span class="o">;</span>
      <span class="k">return</span> <span class="n">logger</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="n">log</span><span class="o">(</span><span class="kt">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="getters-and-setters">Getters and setters</h3>

<p>Getters å’Œ setters æ˜¯ç”¨æ¥è®¾ç½®å’Œè®¿é—®å¯¹è±¡å±æ€§çš„ç‰¹æ®Š å‡½æ•°ã€‚æ¯ä¸ªå®ä¾‹å˜é‡éƒ½éšå«çš„å…·æœ‰ä¸€ä¸ª getterï¼Œ å¦‚æœå˜é‡ä¸æ˜¯ final çš„åˆ™è¿˜æœ‰ä¸€ä¸ª setterã€‚ ä½ å¯ä»¥é€šè¿‡å®è¡Œ getter å’Œ setter æ¥åˆ›å»ºæ–°çš„å±æ€§ï¼Œ ä½¿ç”¨ get å’Œ set å…³é”®å­—å®šä¹‰ getter å’Œ setterï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Rectangle</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">left</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">top</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">width</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">height</span><span class="o">;</span>

  <span class="n">Rectangle</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">top</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>

  <span class="kt">num</span> <span class="kd">get</span> <span class="n">right</span> <span class="o">=&gt;</span> <span class="n">left</span> <span class="o">+</span> <span class="n">width</span><span class="o">;</span>

  <span class="kd">set</span> <span class="n">right</span><span class="o">(</span><span class="n">value</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="n">width</span><span class="o">;</span>

  <span class="kt">num</span> <span class="kd">get</span> <span class="n">bottom</span> <span class="o">=&gt;</span> <span class="n">height</span> <span class="o">+</span> <span class="n">top</span><span class="o">;</span>

  <span class="kd">set</span> <span class="n">bottom</span><span class="o">(</span><span class="n">value</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">top</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="n">height</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>getter å’Œ setter çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨å®ä¾‹å˜é‡ï¼Œåæ¥å¯ä»¥æŠŠå®ä¾‹å˜é‡ç”¨å‡½æ•°åŒ…è£¹èµ·æ¥ï¼Œè€Œè°ƒç”¨ä»£ç çš„åœ°æ–¹ä¸éœ€è¦ä¿®æ”¹ã€‚</p>

<h2 id="å®šä¹‰å‡½æ•°">å®šä¹‰å‡½æ•°</h2>

<h3 id="instance-methodså®ä¾‹å‡½æ•°">Instance methodsï¼ˆå®ä¾‹å‡½æ•°ï¼‰</h3>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Point</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">square</span><span class="o">;</span>

  <span class="n">Point</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>

  <span class="kt">num</span> <span class="n">diffSqrt</span><span class="o">(</span><span class="n">Point</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">var</span> <span class="n">diffA</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">a</span><span class="o">;</span>
    <span class="kd">var</span> <span class="n">diffB</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">b</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">diffA</span> <span class="o">*</span> <span class="n">diffB</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="abstract-methodsæŠ½è±¡å‡½æ•°">Abstract methodsï¼ˆæŠ½è±¡å‡½æ•°ï¼‰</h3>

<p>å®ä¾‹å‡½æ•°ã€ getterã€å’Œ setter å‡½æ•°å¯ä»¥ä¸ºæŠ½è±¡å‡½æ•°ï¼Œ æŠ½è±¡å‡½æ•°æ˜¯åªå®šä¹‰å‡½æ•°æ¥å£ä½†æ˜¯æ²¡æœ‰å®ç°çš„å‡½æ•°ï¼Œç”±å­ç±»æ¥ å®ç°è¯¥å‡½æ•°ã€‚å¦‚æœç”¨åˆ†å·æ¥æ›¿ä»£å‡½æ•°ä½“åˆ™è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠ½è±¡å‡½æ•°ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Docoer</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="n">decor</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyDecoer</span> <span class="kd">extends</span> <span class="n">Docoer</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">decor</span><span class="o">()</span> <span class="o">{</span>
    
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="overridable-operatorså¯è¦†å†™çš„æ“ä½œç¬¦">Overridable operatorsï¼ˆå¯è¦†å†™çš„æ“ä½œç¬¦ï¼‰</h3>

<p>å…·ä½“å¯ä»¥å¤å†™çš„æ“ä½œç¬¦å¦‚ä¸‹ï¼š</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">&lt;</th>
      <th style="text-align: left">+</th>
      <th style="text-align: left">|</th>
      <th style="text-align: left">[]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">&gt;</td>
      <td style="text-align: left">/</td>
      <td style="text-align: left">^</td>
      <td style="text-align: left">[]=</td>
    </tr>
    <tr>
      <td style="text-align: left">&lt;=</td>
      <td style="text-align: left">~/</td>
      <td style="text-align: left">&amp;</td>
      <td style="text-align: left">~</td>
    </tr>
    <tr>
      <td style="text-align: left">&gt;=</td>
      <td style="text-align: left">*</td>
      <td style="text-align: left">Â«</td>
      <td style="text-align: left">==</td>
    </tr>
    <tr>
      <td style="text-align: left">-</td>
      <td style="text-align: left">%</td>
      <td style="text-align: left">Â»</td>
      <td style="text-align: left">Â </td>
    </tr>
  </tbody>
</table>

<p>å¦‚ï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MyPoint</span> <span class="o">{</span>
  <span class="kt">num</span> <span class="n">a</span><span class="o">;</span>
  <span class="kt">num</span> <span class="n">b</span><span class="o">;</span>

  <span class="n">MyPoint</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>

  <span class="n">MyPoint</span> <span class="kd">operator</span> <span class="o">+(</span><span class="n">MyPoint</span> <span class="n">point</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">MyPoint</span><span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="n">b</span> <span class="o">+</span> <span class="n">point</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚æœè¦†å†™äº† <code class="highlighter-rouge">==</code> ï¼Œåˆ™è¿˜åº”è¯¥è¦†å†™å¯¹è±¡çš„ <code class="highlighter-rouge">hashCode getter</code> å‡½æ•°ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">firstName</span><span class="o">,</span> <span class="n">lastName</span><span class="o">;</span>

  <span class="n">Person</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">firstName</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">lastName</span><span class="o">);</span>

  <span class="c1">// Override hashCode using strategy from Effective Java,</span>
  <span class="c1">// Chapter 11.</span>
  <span class="kt">int</span> <span class="kd">get</span> <span class="n">hashCode</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">17</span><span class="o">;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">37</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="n">firstName</span><span class="o">.</span><span class="na">hashCode</span><span class="o">;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">37</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="n">lastName</span><span class="o">.</span><span class="na">hashCode</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// You should generally implement operator == if you</span>
  <span class="c1">// override hashCode.</span>
  <span class="kt">bool</span> <span class="kd">operator</span> <span class="o">==(</span><span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">other</span> <span class="k">is</span><span class="o">!</span> <span class="n">Person</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">other</span><span class="o">;</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">person</span><span class="o">.</span><span class="na">firstName</span> <span class="o">==</span> <span class="n">firstName</span> <span class="o">&amp;&amp;</span>
        <span class="n">person</span><span class="o">.</span><span class="na">lastName</span> <span class="o">==</span> <span class="n">lastName</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">main</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">var</span> <span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">'bob'</span><span class="o">,</span> <span class="s">'smith'</span><span class="o">);</span>
  <span class="kd">var</span> <span class="n">p2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">'bob'</span><span class="o">,</span> <span class="s">'smith'</span><span class="o">);</span>
  <span class="kd">var</span> <span class="n">p3</span> <span class="o">=</span> <span class="s">'not a person'</span><span class="o">;</span>
  <span class="k">assert</span><span class="o">(</span><span class="n">p1</span><span class="o">.</span><span class="na">hashCode</span> <span class="o">==</span> <span class="n">p2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">);</span>
  <span class="k">assert</span><span class="o">(</span><span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span><span class="o">);</span>
  <span class="k">assert</span><span class="o">(</span><span class="n">p1</span> <span class="o">!=</span> <span class="n">p3</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="abstract-classesæŠ½è±¡ç±»">Abstract classesï¼ˆæŠ½è±¡ç±»ï¼‰</h2>

<p>ä½¿ç”¨ abstract ä¿®é¥°ç¬¦å®šä¹‰ä¸€ä¸ª æŠ½è±¡ç±»â€”ä¸€ä¸ªä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ã€‚ æŠ½è±¡ç±»é€šå¸¸ç”¨æ¥å®šä¹‰æ¥å£ï¼Œä»¥åŠéƒ¨åˆ†å®ç°ã€‚å¦‚æœå¸Œæœ›ä½ çš„æŠ½è±¡ç±» æ˜¯å¯ç¤ºä¾‹åŒ–çš„ï¼Œåˆ™å®šä¹‰ä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•°ã€‚</p>

<p>æŠ½è±¡ç±»é€šå¸¸å…·æœ‰æŠ½è±¡å‡½æ•°ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Docoer</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="n">decor</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyDecoer</span> <span class="kd">extends</span> <span class="n">Docoer</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">decor</span><span class="o">()</span> <span class="o">{}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="interfacesæ¥å£">Interfacesï¼ˆæ¥å£ï¼‰</h2>

<p>æ¯ä¸ªç±»éƒ½éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®ä¾‹æˆå‘˜çš„æ¥å£ï¼Œ å¹¶ä¸”è¿™ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å¦‚æœä½ æƒ³ åˆ›å»ºç±» A æ¥æ”¯æŒ ç±» B çš„ apiï¼Œè€Œä¸æƒ³ç»§æ‰¿ B çš„å®ç°ï¼Œ åˆ™ç±» A åº”è¯¥å®ç° B çš„æ¥å£ã€‚
ä¸€ä¸ªç±»å¯ä»¥é€šè¿‡ implements å…³é”®å­—æ¥å®ç°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥å£ï¼Œ å¹¶å®ç°æ¯ä¸ªæ¥å£å®šä¹‰çš„ APIã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">People</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">_name</span><span class="o">;</span>

  <span class="n">People</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_name</span><span class="o">);</span>

  <span class="kt">String</span> <span class="n">greet</span><span class="o">(</span><span class="n">who</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="s">"hello, </span><span class="si">$who</span><span class="s">, i am </span><span class="si">$_name</span><span class="s">"</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Qfxl</span> <span class="kd">implements</span> <span class="n">People</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">_name</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span><span class="c1">// è¿™å¥å¿…é¡»è¦æœ‰</span>

  <span class="nd">@override</span>
  <span class="kt">String</span> <span class="n">greet</span><span class="o">(</span><span class="n">who</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">'Hi </span><span class="si">$who</span><span class="s">. Do you know who I am?'</span><span class="o">;;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="ç»§æ‰¿">ç»§æ‰¿</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>
<span class="kd">class</span> <span class="nc">Human</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="n">breath</span><span class="o">(){</span>

  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Man</span> <span class="kd">extends</span> <span class="n">Human</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">breath</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">breath</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="æšä¸¾">æšä¸¾</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kt">enum</span> <span class="n">Color</span> <span class="o">{</span>
  <span class="n">red</span><span class="o">,</span>
  <span class="n">green</span><span class="o">,</span>
  <span class="n">blue</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æšä¸¾ç±»å‹ä¸­çš„æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ª <code class="highlighter-rouge">index</code> getter å‡½æ•°ï¼Œ è¯¥å‡½æ•°è¿”å›è¯¥å€¼åœ¨æšä¸¾ç±»å‹å®šä¹‰ä¸­çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚ ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å€¼çš„ä½ç½®ä¸º 0ï¼Œ ç¬¬äºŒä¸ªä¸º 1ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre> <span class="kd">var</span> <span class="n">r</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">red</span><span class="o">;</span>
 <span class="n">print</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">index</span><span class="o">);</span> <span class="c1">//0</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æšä¸¾çš„ <code class="highlighter-rouge">values</code> å¸¸é‡å¯ä»¥è¿”å› æ‰€æœ‰çš„æšä¸¾å€¼ã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Color</span><span class="o">&gt;</span> <span class="n">colors</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">values</span><span class="o">;</span>
<span class="n">print</span><span class="o">(</span><span class="n">colors</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¾“å‡ºï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">[</span><span class="n">Color</span><span class="o">.</span><span class="na">red</span><span class="o">,</span> <span class="n">Color</span><span class="o">.</span><span class="na">green</span><span class="o">,</span> <span class="n">Color</span><span class="o">.</span><span class="na">blue</span><span class="o">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¯ä»¥åœ¨ switch è¯­å¥ ä¸­ä½¿ç”¨æšä¸¾ã€‚ å¦‚æœåœ¨ <code class="highlighter-rouge">switch (e)</code> ä¸­çš„ e çš„ç±»å‹ä¸ºæšä¸¾ç±»ï¼Œ å¦‚æœæ²¡æœ‰å¤„ç†æ‰€æœ‰è¯¥æšä¸¾ç±»å‹çš„å€¼çš„è¯ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šã€‚</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kt">enum</span> <span class="n">Color</span> <span class="o">{</span>
  <span class="n">red</span><span class="o">,</span>
  <span class="n">green</span><span class="o">,</span>
  <span class="n">blue</span>
<span class="o">}</span>
<span class="c1">// ...</span>
<span class="n">Color</span> <span class="n">aColor</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">blue</span><span class="o">;</span>
<span class="k">switch</span> <span class="o">(</span><span class="n">aColor</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">Color</span><span class="o">.</span><span class="na">red</span><span class="o">:</span>
    <span class="n">print</span><span class="o">(</span><span class="s">'Red as roses!'</span><span class="o">);</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="n">Color</span><span class="o">.</span><span class="na">green</span><span class="o">:</span>
    <span class="n">print</span><span class="o">(</span><span class="s">'Green as grass!'</span><span class="o">);</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">default</span><span class="o">:</span> <span class="c1">// Without this, you see a WARNING.</span>
    <span class="n">print</span><span class="o">(</span><span class="n">aColor</span><span class="o">);</span>  <span class="c1">// 'Color.blue'</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="æ‹“å±•ç±»ä¸ºç±»æ·»åŠ æ–°åŠŸèƒ½">æ‹“å±•ç±»ï¼ˆä¸ºç±»æ·»åŠ æ–°åŠŸèƒ½ï¼‰</h2>

<p><code class="highlighter-rouge">Mixins</code> æ˜¯ä¸€ç§åœ¨å¤šç±»ç»§æ‰¿ä¸­é‡ç”¨ä¸€ä¸ªç±»ä»£ç çš„æ–¹æ³•ã€‚
ä½¿ç”¨ <code class="highlighter-rouge">with</code> å…³é”®å­—åé¢ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ª <code class="highlighter-rouge">mixin</code> åå­—æ¥ä½¿ç”¨ <code class="highlighter-rouge">mixin</code>ã€‚</p>

<p>å®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿ <code class="highlighter-rouge">Object</code>ï¼Œè¯¥ç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä¸èƒ½è°ƒç”¨ super ï¼Œåˆ™è¯¥ç±»å°±æ˜¯ä¸€ä¸ª <code class="highlighter-rouge">mixin</code>ã€‚ä¾‹å¦‚ï¼š</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Musical</span> <span class="o">{</span>
  <span class="kt">bool</span> <span class="n">canPlayPiano</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="kt">bool</span> <span class="n">canCompose</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="kt">bool</span> <span class="n">canConduct</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

  <span class="kt">void</span> <span class="n">entertainMe</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">canPlayPiano</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Playing piano'</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">canConduct</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Waving hands'</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Humming to self'</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ‹“å±•ç±»</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Musician</span> <span class="kd">extends</span> <span class="n">Performer</span> <span class="k">with</span> <span class="n">Musical</span> <span class="o">{</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="é™æ€å˜é‡ä¸å‡½æ•°">é™æ€å˜é‡ä¸å‡½æ•°</h2>

<h3 id="é™æ€å˜é‡">é™æ€å˜é‡</h3>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">assert</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">red</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="s">"red"</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Color</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">red</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">Color</span><span class="o">(</span><span class="s">"red"</span><span class="o">);</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">Color</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>é™æ€å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰è¢«åˆå§‹åŒ–ã€‚</strong></p>

<h3 id="é™æ€å‡½æ•°">é™æ€å‡½æ•°</h3>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Color</span><span class="o">.</span><span class="na">printColor</span><span class="o">();</span><span class="c1">//è¾“å‡ºqfxl</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Color</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">red</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">Color</span><span class="o">(</span><span class="s">"red"</span><span class="o">);</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">Color</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>

  <span class="kd">static</span> <span class="kt">void</span> <span class="n">printColor</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="s">"qfxl"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>å¯¹äºé€šç”¨çš„æˆ–è€…ç»å¸¸ä½¿ç”¨çš„é™æ€å‡½æ•°ï¼Œè€ƒè™‘ ä½¿ç”¨é¡¶çº§æ–¹æ³•è€Œä¸æ˜¯é™æ€å‡½æ•°ã€‚</strong></p>

<p>é™æ€å‡½æ•°è¿˜å¯ä»¥å½“åšç¼–è¯‘æ—¶å¸¸é‡ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æŠŠé™æ€å‡½æ•°å½“åšå¸¸é‡æ„é€ å‡½æ•°çš„å‚æ•°æ¥ä½¿ç”¨ã€‚</p>
:ET